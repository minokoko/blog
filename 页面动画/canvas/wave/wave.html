<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Wave Demo</title>
	<style>
		#canvas{
			position: absolute;
			left: 50%;
			margin-left: -400px;
			border: 1px solid #000;
			background-color: #5a7de3;
		}
	</style>
</head>
<body>
	<canvas id="canvas" width="800" height="600"></canvas>
	<script>
		var $canvas = document.getElementById('canvas');
		var ctx = $canvas.getContext('2d');
		var waves=[{
			x: 0,
			y: 250,
			w: 150,
			h: 50,
			c: Math.floor(800/150)
		},{
			x: 0,
			y: 260,
			w: 170,
			h: 60,
			c: Math.floor(800/170)
		},{
			x: 0,
			y: 280,
			w: 190,
			h: 40,
			c: Math.floor(800/190)
		},{
			x: 0,
			y: 300,
			w: 200,
			h: 88,
			c: Math.floor(800/200)
		},{
			x: 0,
			y: 320,
			w: 150,
			h: 77,
			c: Math.floor(800/150),
			direction: -1
		},{
			x: 0,
			y: 340,
			w: 120,
			h: 70,
			c: Math.floor(800/120)
		},{
			x: 0,
			y: 350,
			w: 140,
			h: 30,
			c: Math.floor(800/140),
			direction: -1
		}];
		function drawWave(ctx, x0, y0, w, h, c, d){
			var d = d || 1;
			ctx.beginPath();
			ctx.strokeStyle='rgba(255,255,255, 0.4)';
			var x = 0;
			var y = 0;

			ctx.moveTo(x0, y0);
			// for(var i=0;i<=2*Math.PI;i+=0.01){
			// 	x = i*w/(2*Math.PI);
			// 	y = d*Math.sin(i)*h;
			// 	ctx.lineTo(x0+x, y0 + y);
			// }
			for(var i=0;i<=800;i += 25){
				x = 0.1 + (400-i)/800;
				y= d*Math.sin(i)*h;
				ctx.lineTo(x0+i, y0 + y);
			}
			ctx.stroke();
		}
		// for(var i=0;i<waves.length;i++){
			var tmp = waves[0];
			drawWave(ctx, tmp.x, tmp.y, tmp.w, tmp.h, tmp.c, tmp.direction);
		// }
		var offset = 10;
		function move(){
			ctx.clearRect(0,0, 800, 600);
			for(var i=0;i<waves.length;i++){
				var tmp = waves[i];
				drawWave(ctx, tmp.x+offset, tmp.y, tmp.w, tmp.h, tmp.c, tmp.direction);
			}
			offset +=10;

			requestAnimationFrame(move);
		}
		// requestAnimationFrame(move);
	</script>
</body>
</html>